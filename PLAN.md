# 🗾 타비톡 TabiTalk (일본 여행 플래너)

> 장소를 선택하면 시간대별로 지도에 경로가 그려지는 일본 여행 계획 서비스
> 
> **브랜드명**: 타비톡 (TabiTalk) — 旅(tabi, 여행) + Talk(대화). AI와 대화하며 만드는 일본 여행.

---

## 1. 핵심 기능

### 1-1. 여행 일정 관리
- [ ] 여행 기간 설정 (날짜 선택)
- [ ] 날짜별(Day) 일정 구분
- [ ] 시간대별 장소 배치 (아침/오전/점심/오후/저녁/밤)
- [ ] 드래그 앤 드롭으로 일정 순서 변경

### 1-2. 장소 검색 & 추가
- [ ] 수동 검색: 장소명/키워드로 검색
- [ ] AI 추천: 자연어로 요청 ("도쿄 2박3일 맛집 위주", "오사카 가족여행")
- [ ] 카테고리 필터 (맛집, 관광지, 쇼핑, 숙소, 카페 등)
- [ ] 지역 필터 (도쿄, 오사카, 교토, 후쿠오카, 삿포로, 오키나와 등)

### 1-3. 지도 & 경로
- [ ] 선택한 장소들이 지도에 마커로 표시
- [ ] 시간 순서대로 경로(라인) 연결
- [ ] Day별 색상 구분 (Day1 = 파랑, Day2 = 빨강 등)
- [ ] 마커 클릭 시 장소 상세 정보 표시
- [ ] 장소 간 이동 시간/거리 표시

### 1-4. AI 추천
- [ ] 자연어 입력으로 여행 코스 추천
- [ ] 추천된 장소를 바로 일정에 추가 가능
- [ ] 현재 일정 기반으로 "다음 장소" 추천

---

## 2. 확정 스펙

### Q1. 타겟 지역 ✅ 확정
> **도쿄, 오사카, 교토, 후쿠오카** 4개 도시로 시작. 도시 데이터를 모듈화하여 추후 확장 용이하게 구현.

### Q2. 장소 데이터 소스 ✅ 확정
> **자체 큐레이션 DB + Google Places API**. 기본은 도시별 인기 장소 DB로 빠르게 제공, 사용자 직접 검색 시 Google Places API 연동.

### Q3. 지도 라이브러리 ✅ 확정
> **Google Maps JavaScript API** — Places(장소 데이터) + Directions(대중교통 경로) + 커스텀 스타일링으로 올인. 월 $200 무료 크레딧으로 개인 프로젝트는 실질 무료. 일일 요청 한도 설정으로 과금 방지.

### Q4. 프레임워크 ✅ 확정
> **Vite + React + TypeScript**. 가볍고 빠름. UI는 Tailwind CSS + shadcn/ui + Framer Motion. Google Maps는 @vis.gl/react-google-maps (Google 공식 React 래퍼). AI용 API 키는 Vercel Serverless Function (`/api`)으로 보호. Zustand으로 상태관리.

### Q5. AI 추천 방식 ✅ 확정
> **둘 다**. 기본은 자체 큐레이션 DB에서 카테고리/지역 필터링 추천, "AI에게 물어보기" 기능으로 OpenAI API(GPT) 자연어 코스 추천. AI API 키는 Vercel Serverless Function에서 호출.

### Q6. 이동수단 & 경로 ✅ 확정
> **직선 연결 + 예상 이동시간 텍스트 표시**. 지도에는 장소 간 직선 경로로 시각화하고, Google Directions API로 대중교통 예상 이동시간을 텍스트로 표시. 실제 경로 렌더링은 하지 않아 심플하게 유지.

### Q7. 사용자 인증 & 저장 ✅ 확정
> **소셜 로그인** (Google/Kakao 등). 클라우드 저장으로 기기 간 동기화 지원.

### Q8. 언어 ✅ 확정
> **한국어 전용**으로 시작. i18n 구조로 만들어 추후 다국어 확장 용이하게.

---

## 3. 화면 설계서

### 3-1. 랜딩 페이지 (메인)
```
┌─────────────────────────────────────────────────────┐
│                              [로그인] [내 여행 목록]  │
│                                                      │
│                                                      │
│              🗾 일본 여행 플래너                       │
│           나만의 완벽한 일본 여행을 계획하세요           │
│                                                      │
│  ┌─────────────────────────────────────────────┐     │
│  │ 🤖 "도쿄 2박3일 맛집 위주로 추천해줘"         │     │
│  │                                    [추천받기] │     │
│  └─────────────────────────────────────────────┘     │
│                                                      │
│                  ── 또는 ──                           │
│                                                      │
│         [ ✏️ 직접 커스텀으로 만들기 ]                  │
│                                                      │
│                                                      │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐               │
│  │ 도쿄  │ │ 오사카 │ │ 교토  │ │후쿠오카│  ← 인기 도시 │
│  │  📸   │ │  📸   │ │  📸  │ │  📸   │               │
│  └──────┘ └──────┘ └──────┘ └──────┘               │
└─────────────────────────────────────────────────────┘
```

**동작:**
- AI 추천받기 → 자연어 입력 후 → AI가 코스 생성 → 플래너 화면으로 이동 (일정+지도 채워진 상태)
- 직접 만들기 → 도시 선택 / 날짜 설정 → 빈 플래너 화면으로 이동
- 인기 도시 카드 클릭 → 해당 도시로 "직접 만들기" 진입

---

### 3-2. AI 추천 채팅 (모달 or 풀스크린)
```
┌─────────────────────────────────────────────────────┐
│  🤖 AI 여행 플래너                           [✕ 닫기] │
├─────────────────────────────────────────────────────┤
│                                                      │
│  🤖 어떤 여행을 계획하고 계신가요?                      │
│                                                      │
│                    도쿄 2박3일인데 맛집이랑              │
│                    관광지 적절히 섞어줘 🧑              │
│                                                      │
│  🤖 도쿄 2박3일 맛집+관광 코스를 추천해드릴게요!         │
│                                                      │
│  📋 Day 1 - 아사쿠사 & 우에노                         │
│     09:00 센소지 → 12:00 이치란라멘 → ...              │
│  📋 Day 2 - 시부야 & 하라주쿠                         │
│     10:00 메이지신궁 → 12:30 츠타 → ...               │
│  📋 Day 3 - 신주쿠 & 롯폰기                           │
│     ...                                              │
│                                                      │
│     [ 🗺️ 이 코스로 플래너 열기 ]  [ 🔄 다시 추천 ]     │
│                                                      │
├─────────────────────────────────────────────────────┤
│  메시지 입력...                              [전송]   │
└─────────────────────────────────────────────────────┘
```

**동작:**
- 대화형으로 조건 주고받기 가능 ("숙소는 신주쿠로 해줘", "2일차에 디즈니 넣어줘")
- "이 코스로 플래너 열기" → 플래너 화면에 AI 추천 일정이 채워진 상태로 이동
- 이후 플래너에서 자유롭게 수정/추가/삭제 가능

---

### 3-3. 플래너 화면 (핵심 화면)
```
┌─────────────────────────────────────────────────────────┐
│  🗾 도쿄 2박3일   📅 3/15~3/17   [저장] [공유] [로그인]  │
├──────────────────┬──────────────────────────────────────┤
│                  │                                      │
│  ◉ Day 1 │Day 2│ │        🗺️ Google Maps               │
│  ─────────────── │                                      │
│  09:00           │    ①━━━━②━━━━③                       │
│  ┌────────────┐  │    센소지  이치란  스카이트리            │
│  │ 🏯 센소지    │  │                                      │
│  │ ⭐4.5 │ 관광 │  │    (직선 경로 + 마커)                 │
│  │ 📍 아사쿠사  │  │                                      │
│  └────────────┘  │                                      │
│  ↓ 🚃 15분       │                                      │
│  12:00           │                                      │
│  ┌────────────┐  │                                      │
│  │ 🍜 이치란    │  │                                      │
│  │ ⭐4.3 │ 맛집 │  │                                      │
│  │ 📍 아사쿠사  │  │                                      │
│  └────────────┘  │                                      │
│  ↓ 🚃 20분       │                                      │
│  14:00           │                                      │
│  ┌────────────┐  │                                      │
│  │ 🗼 스카이트리 │  │                                      │
│  │ ⭐4.4 │ 관광 │  │                                      │
│  └────────────┘  │                                      │
│                  │                                      │
│  [+ 장소 추가]    │                                      │
│  [🤖 AI 추천]    │                                      │
│                  │                                      │
├──────────────────┤                                      │
│ 📊 Day 1 요약    │                                      │
│ 장소 3개 │ 이동 35분│                                     │
└──────────────────┴──────────────────────────────────────┘
```

**동작:**
- 좌측: Day 탭 전환 + 시간대별 장소 카드 (드래그로 순서 변경)
- 우측: 지도에 Day별 색상으로 마커 + 직선 경로
- 장소 카드 클릭 → 지도에서 해당 마커 하이라이트
- 마커 클릭 → 좌측에서 해당 카드 스크롤
- "+ 장소 추가" → 장소 검색 패널 열림
- "AI 추천" → 현재 일정 기반으로 다음 장소 추천

---

### 3-4. 장소 검색/추가 패널
```
┌──────────────────┐
│ 🔍 장소 검색      │
│ [센소지________ ] │
│                   │
│ 카테고리:          │
│ [맛집][관광][쇼핑] │
│ [카페][숙소][전체] │
│                   │
│ ── 검색 결과 ──   │
│ ┌───────────────┐│
│ │ 🏯 센소지      ││
│ │ ⭐4.5 관광     ││
│ │ 📍 아사쿠사    ││
│ │       [+ 추가] ││
│ └───────────────┘│
│ ┌───────────────┐│
│ │ ⛩️ 메이지신궁   ││
│ │ ⭐4.6 관광     ││
│ │       [+ 추가] ││
│ └───────────────┘│
│                   │
│ ── 추천 장소 ──   │
│ (자체 DB 인기순)  │
│ ...               │
└──────────────────┘
```

---

### 3-5. 화면 흐름 (Flow)

```
[랜딩 페이지]
    │
    ├── "AI 추천받기" ──→ [AI 채팅] ──→ [플래너 (채워진 상태)]
    │                                       │
    └── "직접 만들기" ──→ [도시/날짜 선택] ──→ [플래너 (빈 상태)]
                                             │
                                    ├── [+ 장소 추가] → 검색 패널
                                    ├── [🤖 AI 추천] → AI 채팅
                                    ├── 드래그로 순서 변경
                                    ├── [저장] → 클라우드 저장
                                    └── [공유] → URL 공유
```

---

## 4. 기술 스택 (확정)

| 카테고리 | 선택 | 비고 |
|---------|------|------|
| 프레임워크 | Vite + React | 가볍고 빠름 |
| 언어 | TypeScript | 확정 |
| 지도 | Google Maps (@vis.gl/react-google-maps) | 공식 React 래퍼 |
| 장소 데이터 | 자체 DB + Google Places API | 기본 DB + 실시간 검색 |
| 경로 | Google Directions API | 이동시간 텍스트만 |
| UI | Tailwind CSS + shadcn/ui + Framer Motion | 모던 깔끔 |
| 상태관리 | Zustand | 가볍고 직관적 |
| AI 추천 | 자체 DB 필터링 + OpenAI API (GPT) | 기본 + 고급 |
| 인증 | 소셜 로그인 (Google/Kakao) | 클라우드 저장 |
| 배포 | Vercel | 무료, 서버리스 함수 지원 |
| 언어 | 한국어 (추후 다국어 확장) | i18n 구조 |

---

## 5. 개발 단계 (예상)

### Phase 1 — MVP
- 기본 지도 표시
- 장소 수동 추가/삭제
- Day별 일정 관리
- 지도에 마커 + 경로 표시

### Phase 2 — AI & UX
- AI 여행 추천
- 드래그 앤 드롭
- 이동시간 표시
- 반응형 모바일 대응

### Phase 3 — 확장
- 사용자 인증 & 클라우드 저장
- 일정 공유 (URL/SNS)
- 숙소/교통 예약 연동
- 다국어 지원

---

## 6. 개발 가이드라인

### 6-1. 기능별 스펙 문서 관리
모든 기능은 구현 전에 **개별 스펙 문서**를 먼저 작성한다.

```
docs/
├── specs/
│   ├── 01-project-setup.md          # 프로젝트 초기 설정
│   ├── 02-landing-page.md           # 랜딩 페이지
│   ├── 03-google-maps-integration.md # 지도 연동
│   ├── 04-place-data-model.md       # 장소 데이터 모델
│   ├── 05-day-schedule-management.md # Day별 일정 관리
│   ├── 06-place-search.md           # 장소 검색 & 추가
│   ├── 07-map-markers-routes.md     # 마커 & 경로 표시
│   ├── 08-ai-recommendation.md      # AI 추천 기능
│   ├── 09-drag-and-drop.md          # 드래그 앤 드롭
│   ├── 10-travel-time.md            # 이동시간 표시
│   ├── 11-social-login.md           # 소셜 로그인
│   ├── 12-cloud-save.md             # 클라우드 저장
│   └── 13-share.md                  # 공유 기능
└── PLAN.md                          # 이 문서 (전체 기획)
```

각 스펙 문서에는 다음을 포함:
```markdown
# Feature: [기능명]

## 목적
- 이 기능이 왜 필요한지

## 상세 요구사항
- [ ] 구체적인 기능 항목
- [ ] 엣지 케이스

## 화면/인터랙션
- 어떤 화면에서 어떻게 동작하는지

## 데이터 구조
- 필요한 타입/인터페이스

## API
- 사용하는 외부 API, 엔드포인트

## 테스트 시나리오
- [ ] 정상 케이스
- [ ] 에러 케이스
- [ ] 엣지 케이스

## 완료 조건 (Definition of Done)
- [ ] 구현 완료
- [ ] 테스트 통과
- [ ] 코드 리뷰
```

### 6-2. 구현 원칙

**한 번에 하나씩 (Incremental)**
- 하나의 기능(스펙)을 완전히 구현/테스트 → 커밋 → 다음 기능으로
- 절대 여러 기능을 동시에 반쯤 구현하지 않는다

**테스트 우선**
- 컴포넌트: Vitest + React Testing Library
- E2E (추후): Playwright
- 각 기능의 스펙 문서에 테스트 시나리오 먼저 작성
- 테스트 통과 없이 다음 기능으로 넘어가지 않는다

**코드 품질**
- ESLint + Prettier 강제 적용
- 커밋 전 lint/test 자동 실행 (lint-staged + husky)
- 컴포넌트는 단일 책임 원칙 (하나의 컴포넌트 = 하나의 역할)
- 커스텀 훅으로 로직과 UI 분리

**커밋 컨벤션**
```
feat: 새 기능 추가
fix: 버그 수정
docs: 문서 변경
style: 코드 포맷팅 (기능 변경 X)
refactor: 리팩토링
test: 테스트 추가/수정
chore: 빌드/설정 변경
```

**브랜치 전략**
```
main              ← 배포 가능한 상태만
└── feat/01-setup ← 기능별 브랜치
└── feat/02-landing
└── feat/03-maps
...
```
- 기능 완료 시 PR → 머지 → 다음 기능 브랜치 생성

### 6-3. 프로젝트 구조 (예상)
```
japan-travel-planner/
├── docs/
│   └── specs/                  # 기능별 스펙 문서
├── api/                        # Vercel Serverless Functions
│   └── ai-recommend.ts         # AI 추천 API
├── src/
│   ├── components/
│   │   ├── ui/                 # shadcn/ui 컴포넌트
│   │   ├── layout/             # Header, Sidebar 등
│   │   ├── landing/            # 랜딩 페이지 컴포넌트
│   │   ├── planner/            # 플래너 관련 컴포넌트
│   │   ├── map/                # 지도 관련 컴포넌트
│   │   ├── chat/               # AI 채팅 컴포넌트
│   │   └── search/             # 장소 검색 컴포넌트
│   ├── hooks/                  # 커스텀 훅
│   │   ├── useGoogleMaps.ts
│   │   ├── usePlaces.ts
│   │   ├── useSchedule.ts
│   │   └── useAIRecommend.ts
│   ├── stores/                 # Zustand 스토어
│   │   ├── scheduleStore.ts
│   │   └── uiStore.ts
│   ├── data/                   # 자체 큐레이션 DB
│   │   ├── tokyo.ts
│   │   ├── osaka.ts
│   │   ├── kyoto.ts
│   │   └── fukuoka.ts
│   ├── types/                  # TypeScript 타입 정의
│   │   ├── place.ts
│   │   ├── schedule.ts
│   │   └── user.ts
│   ├── lib/                    # 유틸리티
│   │   ├── google-maps.ts
│   │   └── utils.ts
│   ├── App.tsx
│   ├── main.tsx
│   └── index.css
├── tests/                      # 테스트
│   ├── components/
│   ├── hooks/
│   └── stores/
├── public/
├── .env.example                # 환경변수 템플릿
├── .eslintrc.cjs
├── .prettierrc
├── vite.config.ts
├── tsconfig.json
├── vercel.json
└── package.json
```

---

> **스펙 확정 완료** — 구현 시작!
